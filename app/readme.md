# App (daemon)

## A few words about the usage statistics collecting

By default, the app sends a usage report each time it is run so that we can track how often people use it and how to
improve it. This feature can be turned off by adding the option `--dont-send-anonymous-usage` when executing the app
server, but we will be very grateful if you leave it enabled ðŸ’•.

The usage report is sent after a few seconds after the server starts and every 30 minutes after that and doesn't
contain any sensitive information. Usually, it takes less than 1KB of traffic. To identify the app instance, this app
uses the first 16 bytes of the SHA256 hash of the Docker ID. It's like Google Analytics, but for the backend.

The following information is collected:

- Application version (e.g. `2.0.1`)
- Operating system (just type and architecture, e.g. `linux/arm64`)
- How many routes (hosts) are configured (just a number, e.g. `3`)

> At any time you can inspect the source code to see what and how data is collected.

The data is sent to the server via HTTPS and is not stored anywhere except the [statistics server][mixpanel], and is
not used for any other purposes.

[mixpanel]:https://eu.mixpanel.com/project/2933933

<!--GENERATED:CLI_DOCS-->
<!-- Documentation inside this block generated by gh.tarampamp.am/urfave-cli-docs/markdown; DO NOT EDIT -->

## CLI interface

indocker.app.

Usage:

```bash
$ ./app [GLOBAL FLAGS] [COMMAND] [COMMAND FLAGS] [ARGUMENTS...]
```

Global flags:

| Name               | Description                                   | Default value | Environment variables |
|--------------------|-----------------------------------------------|:-------------:|:---------------------:|
| `--log-level="â€¦"`  | logging level (`debug/info/warn/error/fatal`) |    `info`     |      `LOG_LEVEL`      |
| `--log-format="â€¦"` | logging format (`console/json`)               |   `console`   |     `LOG_FORMAT`      |

### `start` command (aliases: `server`, `serve`)

Start HTTP/HTTPs servers.

Usage:

```bash
$ ./app [GLOBAL FLAGS] start [COMMAND FLAGS] [ARGUMENTS...]
```

The following flags are supported:

| Name                          | Description                                                                                          | Default value                 | Environment variables   |
|-------------------------------|------------------------------------------------------------------------------------------------------|:-----------------------------:|:-----------------------:|
| `--addr="â€¦"`                  | server address (hostname or port; 0.0.0.0 for all interfaces)                                        |           `0.0.0.0`           |      `SERVER_ADDR`      |
| `--http-port="â€¦"`             | HTTP server port                                                                                     |            `8080`             |       `HTTP_PORT`       |
| `--https-port="â€¦"`            | HTTPS server port                                                                                    |            `8443`             |      `HTTPS_PORT`       |
| `--https-cert-file="â€¦"`       | TLS certificate file path (if empty, embedded certificate will be used)                              |                               |    `HTTPS_CERT_FILE`    |
| `--https-key-file="â€¦"`        | TLS key file path (if empty, embedded key will be used)                                              |                               |    `HTTPS_KEY_FILE`     |
| `--read-timeout="â€¦"`          | maximum duration for reading the entire request, including the body (zero = no timeout)              |            `1m0s`             |     `READ_TIMEOUT`      |
| `--write-timeout="â€¦"`         | maximum duration before timing out writes of the response (zero = no timeout)                        |            `1m0s`             |     `WRITE_TIMEOUT`     |
| `--idle-timeout="â€¦"`          | maximum amount of time to wait for the next request (keep-alive, zero = no timeout)                  |            `1m0s`             |     `WRITE_TIMEOUT`     |
| `--shutdown-timeout="â€¦"`      | maximum duration for graceful shutdown                                                               |             `15s`             |   `SHUTDOWN_TIMEOUT`    |
| `--docker-socket="â€¦"`         | docker host (or path to the docker socket)                                                           | `unix:///var/run/docker.sock` |      `DOCKER_HOST`      |
| `--proxy-request-timeout="â€¦"` | time limit for requests made by proxy server                                                         |            `1m0s`             | `PROXY_REQUEST_TIMEOUT` |
| `--docker-watch-interval="â€¦"` | how often to ask Docker for changes (minimum 100ms)                                                  |             `1s`              | `DOCKER_WATCH_INTERVAL` |
| `--dont-send-anonymous-usage` | Don't send anonymous usage statistics (please, leave it enabled, it helps us to improve the project) |            `false`            |         *none*          |

### `start healthcheck` subcommand (aliases: `chk`, `health`, `check`)

Health checker for the HTTP(S) servers. Use case - docker healthcheck.

Usage:

```bash
$ ./app [GLOBAL FLAGS] start healthcheck [COMMAND FLAGS] [ARGUMENTS...]
```

The following flags are supported:

| Name               | Description       | Default value | Environment variables |
|--------------------|-------------------|:-------------:|:---------------------:|
| `--http-port="â€¦"`  | HTTP server port  |    `8080`     |      `HTTP_PORT`      |
| `--https-port="â€¦"` | HTTPS server port |    `8443`     |     `HTTPS_PORT`      |

<!-- End of automatically generated block -->
<!--/GENERATED:CLI_DOCS-->
